
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>The Hero Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.1.1">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Practice/PracticeTheHero.html" />
    
    
    <link rel="prev" href="Chapter5.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Chapter1.html">
            
                <a href="Chapter1.html">
            
                    
                    Starting Out
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="FrameworksSources.html">
            
                <a href="FrameworksSources.html">
            
                    
                    Managers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="Game.html">
            
                <a href="Game.html">
            
                    
                    Game
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="Program.html">
            
                <a href="Program.html">
            
                    
                    Program
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Chapter2.html">
            
                <a href="Chapter2.html">
            
                    
                    Why Tiles?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Chapter3.html">
            
                <a href="Chapter3.html">
            
                    
                    Map Format
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Chapter6.html">
            
                <a href="Chapter6.html">
            
                    
                    Creating Tiles
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="Practice/PracticeCh6.html">
            
                <a href="Practice/PracticeCh6.html">
            
                    
                    On Your Own
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="Chapter5.html">
            
                <a href="Chapter5.html">
            
                    
                    Map Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7" data-path="Chapter8.html">
            
                <a href="Chapter8.html">
            
                    
                    The Hero
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="Practice/PracticeTheHero.html">
            
                <a href="Practice/PracticeTheHero.html">
            
                    
                    On Your Own
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="Chapter9.html">
            
                <a href="Chapter9.html">
            
                    
                    Keys To Move
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="Practice/PracticeMoving.html">
            
                <a href="Practice/PracticeMoving.html">
            
                    
                    On Your Own
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="Chapter10.html">
            
                <a href="Chapter10.html">
            
                    
                    Hit The Wall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="Chapter11.html">
            
                <a href="Chapter11.html">
            
                    
                    Open The Door
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="cleanup.html">
            
                <a href="cleanup.html">
            
                    
                    Cleaning Up
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="borders.html">
            
                <a href="borders.html">
            
                    
                    Screen Borders
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Chapter12.html">
            
                <a href="Chapter12.html">
            
                    
                    Jumping
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="jumpconfig.html">
            
                <a href="jumpconfig.html">
            
                    
                    Configurable Jumping
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="Chapter13.html">
            
                <a href="Chapter13.html">
            
                    
                    Clouds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="Chapter15.html">
            
                <a href="Chapter15.html">
            
                    
                    Simple Enemy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="Chapter17.html">
            
                <a href="Chapter17.html">
            
                    
                    Shooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="Chapter18.html">
            
                <a href="Chapter18.html">
            
                    
                    Getting Items
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="Chapter20.html">
            
                <a href="Chapter20.html">
            
                    
                    Scrolling
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="Chapter21.html">
            
                <a href="Chapter21.html">
            
                    
                    Limit Scrolling
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="Chapter22.html">
            
                <a href="Chapter22.html">
            
                    
                    Depth
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="SpeerateCollisionAndRendering.html">
            
                <a href="SpeerateCollisionAndRendering.html">
            
                    
                    Collision & Rendering
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="AddingAHouse.html">
            
                <a href="AddingAHouse.html">
            
                    
                    Visual Tweaks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="DepthBuffer.html">
            
                <a href="DepthBuffer.html">
            
                    
                    Depth Buffer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="Chapter23.html">
            
                <a href="Chapter23.html">
            
                    
                    Ismetric View
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="Iso_MakeMap.html">
            
                <a href="Iso_MakeMap.html">
            
                    
                    Map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="Iso_MakeCharacters.html">
            
                <a href="Iso_MakeCharacters.html">
            
                    
                    Characters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.3" data-path="Iso_MakeItems.html">
            
                <a href="Iso_MakeItems.html">
            
                    
                    Items & Projectiles
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="Chapter24.html">
            
                <a href="Chapter24.html">
            
                    
                    Mouse To Move
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="Chapter7.html">
            
                <a href="Chapter7.html">
            
                    
                    More Tiles
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >The Hero</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="the-hero">The Hero</h1>
<p>Now that we can generate and render maps lets make our game a bit more interesting. We&apos;re going to add a hero! </p>
<h3 id="new-project">New Project</h3>
<p>Create a new project, call it <strong>TheHero</strong>. Make the standard window appear. Don&apos;t forget to set the working directory.</p>
<p>I&apos;m going to be continuing from the <strong>Game</strong> class we built in the <strong>Creating Tiles</strong> chapter. You make a copy of that game file (<strong>Copy</strong> don&apos;t add a reference, we&apos;re going to be modifying this) and get to a point that the game can display this map:</p>
<p><img src="Images/sample2.PNG" alt="SAMPLE2"></p>
<h3 id="getting-started">Getting Started</h3>
<p>I&apos;m going to get started by giving the hero a spawn position. (Some code below is duplicated from the last example, just to give you an idea of where we are at)</p>
<pre><code class="lang-cs"><span class="hljs-keyword">namespace</span> <span class="hljs-title">TheHero</span> {
    <span class="hljs-keyword">class</span> <span class="hljs-title">Game</span> {
        <span class="hljs-keyword">protected</span> Point SpawnTile = <span class="hljs-keyword">new</span> Point(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// NEW</span>

        <span class="hljs-keyword">protected</span> Tile[][] map = <span class="hljs-keyword">null</span>;
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">int</span>[][] mapLayout = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[][] {
            <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] { <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span> },
</code></pre>
<p>This is going to be the (zero based) tile that our hero spawns at. So, our hero should spawn in the upper left, right above that obstacle.</p>
<p>Now that we have a spawn position, how should we represent the Hero? We could make a bunch of variables in the <code>Game</code> class like <em>heroPosition</em>, <em>heroHealth</em> and <em>heroSprite</em> but as you can imagine this will get out of hand soon. A better approach is to make a <code>Hero</code> object, this way when we need to add new information to our hero we just add it to said object.</p>
<p>Knowing all of the properties a hero will have (health, position, sprite), the real question is will this information be shared amongst other classes? Enemies perhaps? In good OOP fashion we should account for this. Instead of creating a &quot;Hero&quot; class, let&apos;s create a &quot;Character&quot; class that specified characters can then extend.</p>
<p>Let&apos;s make a new file, call it <strong>Character.cs</strong> and start implementing our character.</p>
<pre><code class="lang-cs"><span class="hljs-keyword">using</span> System.Drawing;
<span class="hljs-keyword">using</span> GameFramework;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">CreatingTiles</span> {
    <span class="hljs-keyword">class</span> <span class="hljs-title">Character</span> {
        <span class="hljs-keyword">public</span> Point Position { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> Sprite { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> Rectangle facingUpFrame1 { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> Rectangle facingDownFrame1 { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> Rectangle facingLeftFrame1 { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> Rectangle facingRightFrame1 { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> Rectangle displaySourceRect { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Character</span> (<span class="hljs-params"><span class="hljs-keyword">string</span> spriteSheet, Point startPos</span>) </span>{
            Position = startPos;
            Sprite = TextureManager.Instance.LoadTexture(spriteSheet);
            displaySourceRect = facingDownFrame1;
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Destroy</span>(<span class="hljs-params"></span>) </span>{
            TextureManager.Instance.UnloadTexture(Sprite);
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Render</span>(<span class="hljs-params"></span>) </span>{
            TextureManager.Instance.Draw(Sprite, Position, <span class="hljs-number">1.0</span>f, displaySourceRect);
        }
    }
}
</code></pre>
<p>Looking at the above code, each character has a position and a sprite. These are obvious. Then come four rectangles, these are the positions on the sprite sheet to display for when the hero faces each direction. And finally displaySourceRect. This is the active region of the sprite sheet to display. The rest of the methods are pretty straight forward.</p>
<h3 id="displaying-the-hero">Displaying the hero</h3>
<p>Let&apos;s add some more supporting code to actually display our hero on screen. The following code will all go into <strong>Game.cs</strong>. I included some extra code so you know where we are adding this.</p>
<pre><code class="lang-cs"><span class="hljs-keyword">namespace</span> <span class="hljs-title">TheHero</span> {
    <span class="hljs-keyword">class</span> <span class="hljs-title">Game</span> {
        <span class="hljs-keyword">protected</span> Point SpawnTile = <span class="hljs-keyword">new</span> Point(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>);
        <span class="hljs-keyword">protected</span> Character hero = <span class="hljs-keyword">null</span>; <span class="hljs-comment">// NEW</span>
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">string</span> heroSheet = <span class="hljs-string">&quot;Assets/Link.png&quot;</span>; <span class="hljs-comment">// NEW</span>
</code></pre>
<p>In the <strong>Initialize</strong> method, create the hero object</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Initialize</span>(<span class="hljs-params"></span>) </span>{
    TextureManager.Instance.UseNearestFiltering = <span class="hljs-keyword">true</span>;
    map = GenerateMap(mapLayout, spriteSheets, spriteSources);

    <span class="hljs-comment">// Everything below this comment is NEW</span>
    hero = <span class="hljs-keyword">new</span> Character(heroSheet, <span class="hljs-keyword">new</span> Point(SpawnTile.X * <span class="hljs-number">30</span>, SpawnTile.Y * <span class="hljs-number">30</span>));

    hero.facingLeftFrame1 = <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">26</span>, <span class="hljs-number">30</span>);
    hero.facingDownFrame1 = <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">59</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>, <span class="hljs-number">30</span>);
    hero.facingUpFrame1 = <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">115</span>, <span class="hljs-number">3</span>, <span class="hljs-number">22</span>, <span class="hljs-number">28</span>);
    hero.facingRightFrame1 = <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">195</span>, <span class="hljs-number">1</span>, <span class="hljs-number">26</span>, <span class="hljs-number">30</span>);

    hero.displaySourceRect = hero.facingDownFrame1;
}
</code></pre>
<p>Why is SpawnTile.X and Y multiplied by 30? 30 happens to be the width / height of each of our tiles. If you remember, SpawnTile is in tile coordinates, but the render function of the hero works in pixel coordinates. We have to convert that second argument to pixels, so (tile Index * tile Size)</p>
<p>Where did those magic numbers for each rectangle frame come from? Photoshop! (Well, i actually use <a href="http://www.getpaint.net/index.html" target="_blank">Paint.Net</a>). I just made rectangle selections on the sprite sheet and copy / pasted the numbers into code.</p>
<p>If you install Paint.Net and want to get your own rectangle regions, this is what you should be looking at:</p>
<p><img src="Images/pdotnet.png" alt="PaintDotNet"></p>
<p>Anyway, we created a hero object, if you recall the Character class holds on to a reference of the sprite sheet it was created with. We must call it&apos;s <strong>Destroy</strong> method in the Program&apos;s <strong>Shutdown</strong></p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Shutdown</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> h = <span class="hljs-number">0</span>; h &lt; map.Length; ++h) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> w = <span class="hljs-number">0</span>; w &lt; map[h].Length; ++w) {
            map[h][w].Destroy();
        }
    }
    hero.Destroy(); <span class="hljs-comment">// NEW</span>
}
</code></pre>
<p>Now the last thing that&apos;s left to do is to call the Character classes <strong>Render</strong> method.</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Render</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> h = <span class="hljs-number">0</span>; h &lt; map.Length; ++h) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> w = <span class="hljs-number">0</span>; w &lt; map[h].Length; ++w) {
            map[h][w].Render();
        }
    }
    hero.Render(); <span class="hljs-comment">// NEW</span>
}
</code></pre>
<p>Go ahead, try it out. Running your program, the application should look something (exactly) like this:</p>
<p><img src="Images/hero1.PNG" alt="HERO"></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Chapter5.html" class="navigation navigation-prev " aria-label="Previous page: Map Tools">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Practice/PracticeTheHero.html" class="navigation navigation-next " aria-label="Next page: On Your Own">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"The Hero","level":"1.7","depth":1,"next":{"title":"On Your Own","level":"1.7.1","depth":2,"path":"Practice/PracticeTheHero.md","ref":"Practice/PracticeTheHero.md","articles":[]},"previous":{"title":"Map Tools","level":"1.6","depth":1,"path":"Chapter5.md","ref":"Chapter5.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"letter","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Chapter8.md","mtime":"2016-07-09T03:24:55.794Z","type":"markdown"},"gitbook":{"version":"3.1.1","time":"2016-10-03T18:07:37.300Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

