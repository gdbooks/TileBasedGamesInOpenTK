
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Creating Tiles Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.1.1">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Practice/PracticeCh6.html" />
    
    
    <link rel="prev" href="Chapter3.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Chapter1.html">
            
                <a href="Chapter1.html">
            
                    
                    Starting Out
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="FrameworksSources.html">
            
                <a href="FrameworksSources.html">
            
                    
                    Managers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="Game.html">
            
                <a href="Game.html">
            
                    
                    Game
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="Program.html">
            
                <a href="Program.html">
            
                    
                    Program
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Chapter2.html">
            
                <a href="Chapter2.html">
            
                    
                    Why Tiles?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Chapter3.html">
            
                <a href="Chapter3.html">
            
                    
                    Map Format
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5" data-path="Chapter6.html">
            
                <a href="Chapter6.html">
            
                    
                    Creating Tiles
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="Practice/PracticeCh6.html">
            
                <a href="Practice/PracticeCh6.html">
            
                    
                    On Your Own
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="Chapter5.html">
            
                <a href="Chapter5.html">
            
                    
                    Map Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="Chapter8.html">
            
                <a href="Chapter8.html">
            
                    
                    The Hero
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="Practice/PracticeTheHero.html">
            
                <a href="Practice/PracticeTheHero.html">
            
                    
                    On Your Own
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="Chapter9.html">
            
                <a href="Chapter9.html">
            
                    
                    Keys To Move
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="Practice/PracticeMoving.html">
            
                <a href="Practice/PracticeMoving.html">
            
                    
                    On Your Own
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="Chapter10.html">
            
                <a href="Chapter10.html">
            
                    
                    Hit The Wall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="Chapter11.html">
            
                <a href="Chapter11.html">
            
                    
                    Open The Door
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="cleanup.html">
            
                <a href="cleanup.html">
            
                    
                    Cleaning Up
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="borders.html">
            
                <a href="borders.html">
            
                    
                    Screen Borders
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Chapter12.html">
            
                <a href="Chapter12.html">
            
                    
                    Jumping
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="jumpconfig.html">
            
                <a href="jumpconfig.html">
            
                    
                    Configurable Jumping
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="Chapter13.html">
            
                <a href="Chapter13.html">
            
                    
                    Clouds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="Chapter15.html">
            
                <a href="Chapter15.html">
            
                    
                    Simple Enemy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="Chapter17.html">
            
                <a href="Chapter17.html">
            
                    
                    Shooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="Chapter18.html">
            
                <a href="Chapter18.html">
            
                    
                    Getting Items
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="Chapter20.html">
            
                <a href="Chapter20.html">
            
                    
                    Scrolling
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="Chapter21.html">
            
                <a href="Chapter21.html">
            
                    
                    Limit Scrolling
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="Chapter22.html">
            
                <a href="Chapter22.html">
            
                    
                    Depth
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="SpeerateCollisionAndRendering.html">
            
                <a href="SpeerateCollisionAndRendering.html">
            
                    
                    Collision & Rendering
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="AddingAHouse.html">
            
                <a href="AddingAHouse.html">
            
                    
                    Visual Tweaks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="DepthBuffer.html">
            
                <a href="DepthBuffer.html">
            
                    
                    Depth Buffer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="Chapter23.html">
            
                <a href="Chapter23.html">
            
                    
                    Ismetric View
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="Iso_MakeMap.html">
            
                <a href="Iso_MakeMap.html">
            
                    
                    Map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="Iso_MakeCharacters.html">
            
                <a href="Iso_MakeCharacters.html">
            
                    
                    Characters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.3" data-path="Iso_MakeItems.html">
            
                <a href="Iso_MakeItems.html">
            
                    
                    Items & Projectiles
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="Chapter24.html">
            
                <a href="Chapter24.html">
            
                    
                    Mouse To Move
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="Chapter7.html">
            
                <a href="Chapter7.html">
            
                    
                    More Tiles
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Creating Tiles</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="creating-tiles">Creating Tiles</h1>
<p>The last section left off with an open ended question. What&apos;s more important clean code and messy data, or messy code and clean data? Seeing how we&apos;re making a game, not a tool i would say having clean code take priority. Games are complicated beasts, it&apos;s hard enough to make a game when you write good code, let&apos;s not over complicate the code needed for the sake of data.</p>
<h3 id="getting-the-assets">Getting the assets</h3>
<p>I&apos;m going to be using <a href="Files/ZeldaTiles.zip">this zelda tile set</a> for the tutorial. Download it, and unzip the textures into your &quot;Assets&quot; directory. All of the sprite sheets in that folder are already a power of two.</p>
<h3 id="new-project">New Project</h3>
<p>Create a new project, call it <strong>CreatingTiles</strong> and make the standard window appear. Don&apos;t forget to set your working directory correctly. Follow this chapter along in this new solution.</p>
<h3 id="tile-object">Tile Object</h3>
<p>The first thing we need is a tile object. For now each object will have two properties, a sprite to display and a boolean to dictate if we can walk on it or not. In the future we will add properties to this tile definition as needed (eq: IsDestructable, IsHidden, etc...). The name of this class is going to simply be <code>Tile</code>:</p>
<pre><code class="lang-cs"><span class="hljs-keyword">class</span> <span class="hljs-title">Tile</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> Sprite { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> Rectangle Source { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> Walkable { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-keyword">public</span> Point WorldPosition { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> Scale { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Tile</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> spritePath, Rectangle sourceRect</span>) </span>{
        Sprite = TextureManager.Instance.LoadTexture(spritePath);
        Source = sourceRect;
        Walkable = <span class="hljs-keyword">false</span>;
        WorldPosition = <span class="hljs-keyword">new</span> Point(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
        Scale = <span class="hljs-number">1.0</span>f;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Render</span>(<span class="hljs-params"></span>) </span>{
        Point renderPosition = <span class="hljs-keyword">new</span> Point(WorldPosition.X, WorldPosition.Y);
        renderPosition.X = (<span class="hljs-keyword">int</span>)(renderPosition.X * Scale);
        renderPosition.Y = (<span class="hljs-keyword">int</span>)(renderPosition.Y * Scale);
        TextureManager.Instance.Draw(Sprite, renderPosition, Scale, Source);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Destroy</span>(<span class="hljs-params"></span>) </span>{
        TextureManager.Instance.UnloadTexture(Sprite);
    }
}
</code></pre>
<p>Lets see what the <strong>Variables</strong> do:</p>
<ul>
<li>Sprite - Once loaded, this is a reference to the sprite sheet we will be rendering</li>
<li>Source - What section of the sprite sheet do we want to display</li>
<li>Walkable - Can the player walk on this tile</li>
<li>WorldPosition - What X / Y should the tile render a, this respects scale</li>
<li>Scale - We might want to scale the tile to display on a larger screen<ul>
<li>If we have a tile of size 16 at x position 2, it will draw at pixel 2 with a width of 16</li>
<li>The same (width 16, x 2) with a scale of 2 it will render at piel 4 with a width of 32</li>
</ul>
</li>
</ul>
<p>The <strong>constructor</strong> takes the path to a sprite sheet and a rectangle of the subsprite that represents this tile. It sets the appropriate member variables, and sets the rest to defaults.</p>
<p>Because the constructor called <code>LoadTexture</code> we must also call <code>UnloadTexture</code>. The <strong>Destroy</strong> method serves this purpose. Once the Tile is no longer needed the Destroy function should be called.</p>
<p>The <strong>Render</strong> function is super simple, it just uses all the members we have to render the sprite. It&apos;s a simple wrapper for the <code>Draw</code> function of <em>TextureManager</em>. The only work render does is to account for scaling and world position.</p>
<h3 id="map-data">Map Data</h3>
<p>So now that we have the definition of what an individual tile is, let&apos;s see if we can make a map. The <code>map</code> should be in a game class, you should be able to figure out how to add a game instance to the window.</p>
<pre><code class="lang-cs"><span class="hljs-keyword">class</span> <span class="hljs-title">Game</span> {
    <span class="hljs-keyword">protected</span> Tile[][] map = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">int</span>[][] mapLayout = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[][] {
        <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] { <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span> },
        <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] { <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> },
        <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] { <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> },
        <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] { <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> },
        <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] { <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> },
        <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] { <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span> }
    };

    <span class="hljs-comment">// Singleton (private static instance, public static getter, private constructor)</span>
}
</code></pre>
<ul>
<li><strong>map</strong>: a 2D array to hold runtime map information</li>
<li><strong>mapLayout</strong>: Meta-data to hold an easily configurable map. <ul>
<li>0&apos;s are walkable tiles</li>
<li>1&apos;s are not walkable</li>
</ul>
</li>
</ul>
<p>As your game gets more and more complicated it may not be possible to store data in a simple representation like the one given above. I&apos;m going to try my best to keep things as simple as possible for the tutorial. </p>
<p>Also take note that my game class is a singleton. You should make yours a singleton too, it will make hooking it up to the game window super easy.</p>
<p>Now that we know what the map is going to look like, the next step is to actually load the map in! In order to create a tile object we need to know two things, the sprite sheet it&apos;s going to be on and the rectangle on that sheet. Before going any further, lets also add this meta-data to the game class</p>
<pre><code class="lang-cs"><span class="hljs-keyword">class</span> <span class="hljs-title">Game</span> {
    <span class="hljs-keyword">protected</span> Tile[][] map = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">int</span>[][] mapLayout = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[][] {
        <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] { <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span> },
        <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] { <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> },
        <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] { <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> },
        <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] { <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> },
        <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] { <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> },
        <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] { <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span> }
    };

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">string</span>[] spriteSheets = <span class="hljs-keyword">new</span> <span class="hljs-keyword">string</span>[] {
        <span class="hljs-string">&quot;Assets/HouseTiles.png&quot;</span>,
        <span class="hljs-string">&quot;Assets/HouseTiles.png&quot;</span>
    };
    <span class="hljs-keyword">protected</span> Rectangle[] spriteSources = <span class="hljs-keyword">new</span> Rectangle[] {
        <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">466</span>,<span class="hljs-number">32</span>,<span class="hljs-number">30</span>,<span class="hljs-number">30</span>),
        <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">466</span>,<span class="hljs-number">1</span>,<span class="hljs-number">30</span>,<span class="hljs-number">30</span>)
    };
}
</code></pre>
<p>Why did we add two arrays? Well, map layout refers to tiles by numbers, each number coresponds to an element in one of the new arrays we just created. Do we need the <code>spriteSheets</code> array? Not really. If we have a &quot;world map&quot; atlas that contains EVERY tile in the game, then the <code>spriteSheets</code> array is a lot of extra work. But what if we want tiles with a number <strong>5</strong> and above to come from an alternate sprite sheet? The <code>spriteSheets</code> array lets us do just that.</p>
<h3 id="creating-the-map">Creating the Map</h3>
<p>We now have all the information we need to build the map array. Some information like if a map is walkable or not is obvious, others like the X / Y location of a map we have to figure out. Let&apos;s create a helper function to create the map, and call said function in Initialize.</p>
<pre><code class="lang-cs">Tile[][] GenerateMap(<span class="hljs-keyword">int</span>[][] layout, <span class="hljs-keyword">string</span>[] sheets, Rectangle[] sources) {
    Tile[][] result = <span class="hljs-keyword">new</span> Tile[layout.Length][];
    <span class="hljs-keyword">float</span> scale = <span class="hljs-number">1.0</span>f;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; layout.Length; ++i) {
        result[i] = <span class="hljs-keyword">new</span> Tile[layout[i].Length];

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; layout[i].Length; ++j) {
            <span class="hljs-comment">// The 0&apos;s and i&apos;s in the layout array correspond to</span>
            <span class="hljs-comment">// strings and rectangles in the sheets and sources arrays</span>
            <span class="hljs-keyword">string</span> sheet = sheets[layout[i][j]];
            Rectangle source = sources[layout[i][j]];

            <span class="hljs-comment">// We don&apos;t have to take scale into account, but we do need</span>
            <span class="hljs-comment">// to space our grid out accordingly. It might be smart to have</span>
            <span class="hljs-comment">// a width and height that&apos;s a constant, right now we are assuming</span>
            <span class="hljs-comment">// that all of the passed in rect&apos;s in sources will have a uniform size</span>
            Point worldPosition = <span class="hljs-keyword">new</span> Point();
            worldPosition.X = (<span class="hljs-keyword">int</span>)(j * source.Width);
            worldPosition.Y = (<span class="hljs-keyword">int</span>)(i * source.Height);

            result[i][j] = <span class="hljs-keyword">new</span> Tile(sheet, source);
            result[i][j].Walkable = layout[i][j] == <span class="hljs-number">0</span>;
            result[i][j].WorldPosition = worldPosition;
            result[i][j].Scale = scale;
        }
    }

    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Initialize</span>(<span class="hljs-params"></span>) </span>{
    TextureManager.Instance.UseNearestFiltering = <span class="hljs-keyword">true</span>;
    map = GenerateMap(mapLayout, spriteSheets, spriteSources);
}
</code></pre>
<p>With <code>GenerateMap</code> containing all of the logic for initializing tiles you can imagine that it&apos;s going to get more complicated as your tiles get more complicated. This is the expected behaviour, it&apos;s just something to keep in mind. </p>
<p>Initialize calls a method of TextureManager we have not talked about yet:</p>
<pre><code>TextureManager.Instance.UseNearestFiltering = true;
</code></pre><p>What does this do? Filtering is applied when an image is loaded. If filtering uses nearest, then everything resizes in a pixelated fashion. This is how you get pixel perfect images. If nearest filtering is NOT used then anti aliasing is applied to textures that are resized. This MAY cause blurry looking textures.</p>
<h3 id="displaying-the-map">Displaying the Map</h3>
<p>With all of that in place, i think we are ready to render our tiles! Because the tile class has a <code>Render</code> method that takes care of it&apos;s own rendering, this is going to be super simple. Inside the <strong>Game</strong> classes <code>Render</code> function just call <code>Render</code> on every tile:</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Render</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> h = <span class="hljs-number">0</span>; h &lt; map.Length; ++h) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> w = <span class="hljs-number">0</span>; w &lt; map[h].Length; ++w) {
            map[h][w].Render();
        }
    }
}
</code></pre>
<p>The game should now look like this:</p>
<p><img src="Images/sample1_new.PNG" width="408" height="325"></p>
<h3 id="cleanup">Cleanup</h3>
<p>Don&apos;t forget, each tile loaded a sprite, we must now unload these!</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Shutdown</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> h = <span class="hljs-number">0</span>; h &lt; map.Length; ++h) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> w = <span class="hljs-number">0</span>; w &lt; map[h].Length; ++w) {
            map[h][w].Destroy();
        }
    }
}
</code></pre>
<h3 id="window-size">Window size</h3>
<p>If you want the tiles to fill out the full window, set the ClientSize of the window to <strong>30 * 8</strong> by <strong>30 * 6</strong>.</p>
<ul>
<li>30 - width / height of sprite</li>
<li>8 / 6 - How many sprites we have horizontally (8) and vertically(6)</li>
</ul>
<p>If our sprites had a scale factor to them, we would take that into account as well. Here is what the game looks like with the window size adjusted:</p>
<p><img src="Images/sample2.PNG" alt="SAMPLE2"></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Chapter3.html" class="navigation navigation-prev " aria-label="Previous page: Map Format">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Practice/PracticeCh6.html" class="navigation navigation-next " aria-label="Next page: On Your Own">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Creating Tiles","level":"1.5","depth":1,"next":{"title":"On Your Own","level":"1.5.1","depth":2,"path":"Practice/PracticeCh6.md","ref":"Practice/PracticeCh6.md","articles":[]},"previous":{"title":"Map Format","level":"1.4","depth":1,"path":"Chapter3.md","ref":"Chapter3.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"letter","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Chapter6.md","mtime":"2016-07-09T03:24:55.794Z","type":"markdown"},"gitbook":{"version":"3.1.1","time":"2016-10-03T18:07:37.300Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

