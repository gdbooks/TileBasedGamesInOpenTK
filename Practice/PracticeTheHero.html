
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>On Your Own Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.1.1">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../Chapter9.html" />
    
    
    <link rel="prev" href="../Chapter8.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../Chapter1.html">
            
                <a href="../Chapter1.html">
            
                    
                    Starting Out
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../FrameworksSources.html">
            
                <a href="../FrameworksSources.html">
            
                    
                    Managers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../Game.html">
            
                <a href="../Game.html">
            
                    
                    Game
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../Program.html">
            
                <a href="../Program.html">
            
                    
                    Program
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../Chapter2.html">
            
                <a href="../Chapter2.html">
            
                    
                    Why Tiles?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../Chapter3.html">
            
                <a href="../Chapter3.html">
            
                    
                    Map Format
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../Chapter6.html">
            
                <a href="../Chapter6.html">
            
                    
                    Creating Tiles
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="PracticeCh6.html">
            
                <a href="PracticeCh6.html">
            
                    
                    On Your Own
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../Chapter5.html">
            
                <a href="../Chapter5.html">
            
                    
                    Map Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../Chapter8.html">
            
                <a href="../Chapter8.html">
            
                    
                    The Hero
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.7.1" data-path="PracticeTheHero.html">
            
                <a href="PracticeTheHero.html">
            
                    
                    On Your Own
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../Chapter9.html">
            
                <a href="../Chapter9.html">
            
                    
                    Keys To Move
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="PracticeMoving.html">
            
                <a href="PracticeMoving.html">
            
                    
                    On Your Own
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../Chapter10.html">
            
                <a href="../Chapter10.html">
            
                    
                    Hit The Wall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../Chapter11.html">
            
                <a href="../Chapter11.html">
            
                    
                    Open The Door
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../cleanup.html">
            
                <a href="../cleanup.html">
            
                    
                    Cleaning Up
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../borders.html">
            
                <a href="../borders.html">
            
                    
                    Screen Borders
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../Chapter12.html">
            
                <a href="../Chapter12.html">
            
                    
                    Jumping
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../jumpconfig.html">
            
                <a href="../jumpconfig.html">
            
                    
                    Configurable Jumping
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../Chapter13.html">
            
                <a href="../Chapter13.html">
            
                    
                    Clouds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../Chapter15.html">
            
                <a href="../Chapter15.html">
            
                    
                    Simple Enemy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../Chapter17.html">
            
                <a href="../Chapter17.html">
            
                    
                    Shooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../Chapter18.html">
            
                <a href="../Chapter18.html">
            
                    
                    Getting Items
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../Chapter20.html">
            
                <a href="../Chapter20.html">
            
                    
                    Scrolling
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="../Chapter21.html">
            
                <a href="../Chapter21.html">
            
                    
                    Limit Scrolling
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="../Chapter22.html">
            
                <a href="../Chapter22.html">
            
                    
                    Depth
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="../SpeerateCollisionAndRendering.html">
            
                <a href="../SpeerateCollisionAndRendering.html">
            
                    
                    Collision & Rendering
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="../AddingAHouse.html">
            
                <a href="../AddingAHouse.html">
            
                    
                    Visual Tweaks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="../DepthBuffer.html">
            
                <a href="../DepthBuffer.html">
            
                    
                    Depth Buffer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="../Chapter23.html">
            
                <a href="../Chapter23.html">
            
                    
                    Ismetric View
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="../Iso_MakeMap.html">
            
                <a href="../Iso_MakeMap.html">
            
                    
                    Map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="../Iso_MakeCharacters.html">
            
                <a href="../Iso_MakeCharacters.html">
            
                    
                    Characters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.3" data-path="../Iso_MakeItems.html">
            
                <a href="../Iso_MakeItems.html">
            
                    
                    Items & Projectiles
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="../Chapter24.html">
            
                <a href="../Chapter24.html">
            
                    
                    Mouse To Move
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="../Chapter7.html">
            
                <a href="../Chapter7.html">
            
                    
                    More Tiles
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >On Your Own</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="on-your-own">On Your Own</h1>
<p>The Character class we created in <strong>The Hero</strong> section works ok for what we need, but it&apos;s very static. By this i mean there are only ever 4 images, and even then the one that is to be displayed needs to be hard coded. Let&apos;s fix this. In this section we&apos;re going to make the hero more dynamic.</p>
<h3 id="think-about-it">Think about it</h3>
<p>How would you solve this problem? I&apos;m going to present my solution below, but it&apos;s by no means the best or only way to tackle the problem. Before reading my answer think about how you would solve this problem. Maybe try to implement it! If you do come up with your own implementation, i want to see it! You can also use my implementation as a guide, and not follow it verbatim. Or you can do what  i do, this is a  learning experience!</p>
<h3 id="new-project">New Project</h3>
<p>Create a new project, call it <strong>HeroPractice</strong>. We will be continuing from the <strong>The Hero</strong> section, make sure that the new project is up to date / par with that.</p>
<h3 id="changing-the-hero">Changing the hero</h3>
<p>Any time you hear the word dynamic, you should probably start thinking about a <a href="https://goo.gl/BCUxAT" target="_blank">Dictionary</a> (Hash table). Dictionary&apos;s allow us to get super customizable by having dynamic string keys. We&apos;re going to re-do the <strong>Character</strong> class with dictionary support.</p>
<p>First, remove the following variables from the character class:</p>
<ul>
<li>facingDownFrame1</li>
<li>facingLeftFrame1</li>
<li>facingRightFrame1</li>
<li>displaySourceRect</li>
</ul>
<p>Add a new dictionary, the key should be a string, the value should be a rectangle. I would call this dictionary <strong>spriteSources</strong>, but the name is up to you. Also, add a string. Again what you call the string is up to you, i call mine <strong>currentSprite</strong>.</p>
<p>The idea here is pretty simple, we will be able to add any number of sprites to the <strong>Character</strong> object, and reference them by strings thanks to our new dictionary. Only one of these sprites will display at a time, and it will be the one that has the same key as <strong>currenSprite</strong>.</p>
<p>We don&apos;t want these variables to be just randomly set, make sure they are private. Next, make the following helper metod in the <strong>Character</strong> class:</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddSprite</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> name, Rectangle source</span>) </span>{
</code></pre>
<p>This method should add a new entry into the <strong>spriteSources</strong> dictionary. If <strong>currentSprite</strong> has not been set yet (If it&apos;s null or empty), set <strong>currentSprite</strong> to be the <strong>name</strong> argument. This way if at least one sprite is added it will be displayed by default no matter what.</p>
<p>Also add this helper method:</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SetSprite</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> name</span>) </span>{
</code></pre>
<p><strong>SetSprite</strong> should check if the <strong>name</strong> argument exists as a key inside the <strong>spriteSources</strong> dictionary. If it does set the <strong>currentSprite</strong> variable equal to the <strong>name</strong> argument. If not, do nothing.</p>
<p>Last, update your <strong>Render</strong> function. It should display a sprite out of the <strong>spriteSources</strong> dictionary. IF the <strong>currentSprite</strong> string has not been set (If it&apos;s null or empty), early out and draw nothing (as the dictionary access would trigger an NRE).</p>
<h3 id="end-result">End result</h3>
<p>The <strong>Initialize</strong> method of my <strong>Progra.cs</strong> looks like this:</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Initialize</span>(<span class="hljs-params"></span>) </span>{
    TextureManager.Instance.UseNearestFiltering = <span class="hljs-keyword">true</span>;
    map = GenerateMap(mapLayout, spriteSheets, spriteSources);
    hero = <span class="hljs-keyword">new</span> Character(heroSheet, <span class="hljs-keyword">new</span> Point(SpawnTile.X * <span class="hljs-number">30</span>, SpawnTile.Y * <span class="hljs-number">30</span>));

    hero.AddSprite(<span class="hljs-string">&quot;Down&quot;</span>, <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">59</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>, <span class="hljs-number">30</span>));
    hero.AddSprite(<span class="hljs-string">&quot;Up&quot;</span>, <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">115</span>, <span class="hljs-number">3</span>, <span class="hljs-number">22</span>, <span class="hljs-number">28</span>));
    hero.AddSprite(<span class="hljs-string">&quot;Left&quot;</span>, <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">26</span>, <span class="hljs-number">30</span>));
    hero.AddSprite(<span class="hljs-string">&quot;Right&quot;</span>, <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">195</span>, <span class="hljs-number">1</span>, <span class="hljs-number">26</span>, <span class="hljs-number">30</span>));
}
</code></pre>
<p>And i added this to <strong>Update</strong> so i could test:</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"><span class="hljs-keyword">float</span> dt</span>) </span>{
    InputManager i = InputManager.Instance; <span class="hljs-comment">// Local reference to input manager</span>
    <span class="hljs-comment">// ^ I only use the reference to save on space below</span>

    <span class="hljs-keyword">if</span> (i.KeyDown(OpenTK.Input.Key.Left) || i.KeyDown(OpenTK.Input.Key.A)) {
        hero.SetSprite(<span class="hljs-string">&quot;Left&quot;</span>);
    }
    <span class="hljs-keyword">if</span> (i.KeyDown(OpenTK.Input.Key.Right) || i.KeyDown(OpenTK.Input.Key.D)) {
        hero.SetSprite(<span class="hljs-string">&quot;Right&quot;</span>);
    }
    <span class="hljs-keyword">if</span> (i.KeyDown(OpenTK.Input.Key.Up) || i.KeyDown(OpenTK.Input.Key.W)) {
        hero.SetSprite(<span class="hljs-string">&quot;Up&quot;</span>);
    }
    <span class="hljs-keyword">if</span> (i.KeyDown(OpenTK.Input.Key.Down) || i.KeyDown(OpenTK.Input.Key.S)) {
        hero.SetSprite(<span class="hljs-string">&quot;Down&quot;</span>);
    }
}
</code></pre>
<p>Even tough link still doesn&apos;t move the arrow keys (and WASD) now make him turn in different directions :)</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../Chapter8.html" class="navigation navigation-prev " aria-label="Previous page: The Hero">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../Chapter9.html" class="navigation navigation-next " aria-label="Next page: Keys To Move">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"On Your Own","level":"1.7.1","depth":2,"next":{"title":"Keys To Move","level":"1.8","depth":1,"path":"Chapter9.md","ref":"Chapter9.md","articles":[{"title":"On Your Own","level":"1.8.1","depth":2,"path":"Practice/PracticeMoving.md","ref":"Practice/PracticeMoving.md","articles":[]}]},"previous":{"title":"The Hero","level":"1.7","depth":1,"path":"Chapter8.md","ref":"Chapter8.md","articles":[{"title":"On Your Own","level":"1.7.1","depth":2,"path":"Practice/PracticeTheHero.md","ref":"Practice/PracticeTheHero.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"letter","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Practice/PracticeTheHero.md","mtime":"2016-07-09T03:24:55.923Z","type":"markdown"},"gitbook":{"version":"3.1.1","time":"2016-10-03T18:07:37.300Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

