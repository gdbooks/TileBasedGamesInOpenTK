
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Limit Scrolling Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.1.1">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Chapter22.html" />
    
    
    <link rel="prev" href="Chapter20.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Chapter1.html">
            
                <a href="Chapter1.html">
            
                    
                    Starting Out
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="FrameworksSources.html">
            
                <a href="FrameworksSources.html">
            
                    
                    Managers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="Game.html">
            
                <a href="Game.html">
            
                    
                    Game
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="Program.html">
            
                <a href="Program.html">
            
                    
                    Program
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Chapter2.html">
            
                <a href="Chapter2.html">
            
                    
                    Why Tiles?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Chapter3.html">
            
                <a href="Chapter3.html">
            
                    
                    Map Format
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Chapter6.html">
            
                <a href="Chapter6.html">
            
                    
                    Creating Tiles
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="Practice/PracticeCh6.html">
            
                <a href="Practice/PracticeCh6.html">
            
                    
                    On Your Own
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="Chapter5.html">
            
                <a href="Chapter5.html">
            
                    
                    Map Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="Chapter8.html">
            
                <a href="Chapter8.html">
            
                    
                    The Hero
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="Practice/PracticeTheHero.html">
            
                <a href="Practice/PracticeTheHero.html">
            
                    
                    On Your Own
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="Chapter9.html">
            
                <a href="Chapter9.html">
            
                    
                    Keys To Move
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="Practice/PracticeMoving.html">
            
                <a href="Practice/PracticeMoving.html">
            
                    
                    On Your Own
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="Chapter10.html">
            
                <a href="Chapter10.html">
            
                    
                    Hit The Wall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="Chapter11.html">
            
                <a href="Chapter11.html">
            
                    
                    Open The Door
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="cleanup.html">
            
                <a href="cleanup.html">
            
                    
                    Cleaning Up
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="borders.html">
            
                <a href="borders.html">
            
                    
                    Screen Borders
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Chapter12.html">
            
                <a href="Chapter12.html">
            
                    
                    Jumping
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="jumpconfig.html">
            
                <a href="jumpconfig.html">
            
                    
                    Configurable Jumping
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="Chapter13.html">
            
                <a href="Chapter13.html">
            
                    
                    Clouds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="Chapter15.html">
            
                <a href="Chapter15.html">
            
                    
                    Simple Enemy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="Chapter17.html">
            
                <a href="Chapter17.html">
            
                    
                    Shooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="Chapter18.html">
            
                <a href="Chapter18.html">
            
                    
                    Getting Items
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="Chapter20.html">
            
                <a href="Chapter20.html">
            
                    
                    Scrolling
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.16.1" data-path="Chapter21.html">
            
                <a href="Chapter21.html">
            
                    
                    Limit Scrolling
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="Chapter22.html">
            
                <a href="Chapter22.html">
            
                    
                    Depth
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="SpeerateCollisionAndRendering.html">
            
                <a href="SpeerateCollisionAndRendering.html">
            
                    
                    Collision & Rendering
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="AddingAHouse.html">
            
                <a href="AddingAHouse.html">
            
                    
                    Visual Tweaks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="DepthBuffer.html">
            
                <a href="DepthBuffer.html">
            
                    
                    Depth Buffer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="Chapter23.html">
            
                <a href="Chapter23.html">
            
                    
                    Ismetric View
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="Iso_MakeMap.html">
            
                <a href="Iso_MakeMap.html">
            
                    
                    Map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="Iso_MakeCharacters.html">
            
                <a href="Iso_MakeCharacters.html">
            
                    
                    Characters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.3" data-path="Iso_MakeItems.html">
            
                <a href="Iso_MakeItems.html">
            
                    
                    Items & Projectiles
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="Chapter24.html">
            
                <a href="Chapter24.html">
            
                    
                    Mouse To Move
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="Chapter7.html">
            
                <a href="Chapter7.html">
            
                    
                    More Tiles
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Limit Scrolling</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="scrolling-with-limits">Scrolling with limits</h1>
<p>The way we have scrolling implemented right now works fine, but there is one small thing that might (or might not) bother you about it. The edge of the scren! There are three ways games deal with this:</p>
<ul>
<li>Add obstacles to edge of screen so there is no black space</li>
<li>Render black (or other solid color) in blank space (what we do now)</li>
<li>Stop camera at edge of screen</li>
</ul>
<p>In this section we are going to try to stop the camera at the edge of the screen. This means you will be able to walk from wall to wall, and see no background!</p>
<p>The implementation of this is decievingly simple, it&apos;s all done in <code>Render</code> method  <strong>Game.cs</strong> before anything is actually rendered! All we do is clamp the offsetPosition variable (camera space transformation) in four edge cases. When we calculate offet position:</p>
<ul>
<li>If the hero&apos;s world X position is less than 1/2 of the screen with<ul>
<li>Clamp the xOFfset to 0</li>
</ul>
</li>
<li>If the hero&apos;s world Y position is les than 1/2 the screen height<ul>
<li>Clamp the yOffset to 0</li>
</ul>
</li>
<li>If heros world X is greater than the world width minus 1/2 screen width<ul>
<li>Clamp xOffset to world width minus screen width </li>
</ul>
</li>
<li>If heros world Y is greater than the world width minus 1/2 screen height<ul>
<li>Clamp yOffset to world height minus screen height</li>
</ul>
</li>
</ul>
<p>As you can see, all we&apos;re doing is not moving the offsetPosition after the hero passes a given point. Because offsetPosition is what transforms world space to camera space this essentially pegs the camera in spots so no corner of the map is off-screen. This is what my math looks like:</p>
<pre><code class="lang-cs"><span class="hljs-comment">// If the hero is less than half the camera close to the left or top corner</span>
<span class="hljs-keyword">if</span> (hero.Position.X &lt; <span class="hljs-number">4</span> * tileSize) {
    offsetPosition.X = <span class="hljs-number">0</span>;
}
<span class="hljs-keyword">if</span> (hero.Position.Y &lt; <span class="hljs-number">3</span> * tileSize) {
    offsetPosition.Y = <span class="hljs-number">0</span>;
}

<span class="hljs-comment">// If the hero is less than half the camera close to the bottom or right corner</span>
<span class="hljs-keyword">if</span> (hero.Position.X &gt; (currentMap[<span class="hljs-number">0</span>].Length - <span class="hljs-number">4</span>) * tileSize) {
    offsetPosition.X = (currentMap[<span class="hljs-number">0</span>].Length - <span class="hljs-number">8</span>) * tileSize;
}
<span class="hljs-keyword">if</span> (hero.Position.Y &gt; (currentMap.Length - <span class="hljs-number">3</span>) * tileSize) {
    offsetPosition.Y = (currentMap.Length - <span class="hljs-number">6</span>) * tileSize;
}
</code></pre>
<p>If you <strong>run the game</strong> there is going to be a visual error. When you are near the edge of the screen one or more of the tiles might be missing! Like this:</p>
<p><img src="Images/visual_error.PNG" alt="ERROR"></p>
<p>This happens because of <strong>Map.cs</strong>, it limits which tiles are rendered and which are hidden. But it only lets 4 tiles to the left or right. We basically need to double the ammount of visible tiles, this is because we can now walk to the edge of the screen. So find the bit of code that hadnles how much is visible, this code:</p>
<pre><code class="lang-cs"><span class="hljs-comment">// Find the visible corners of the screen in pixel position</span>
<span class="hljs-keyword">int</span> minX = (<span class="hljs-keyword">int</span>)cameraCenter.X - <span class="hljs-number">4</span> * <span class="hljs-number">30</span> - <span class="hljs-number">30</span>;
<span class="hljs-keyword">int</span> minY = (<span class="hljs-keyword">int</span>)cameraCenter.Y - <span class="hljs-number">3</span> * <span class="hljs-number">30</span> - <span class="hljs-number">30</span>;
<span class="hljs-keyword">int</span> maxX = (<span class="hljs-keyword">int</span>)cameraCenter.X + <span class="hljs-number">4</span> * <span class="hljs-number">30</span> + <span class="hljs-number">30</span>;
<span class="hljs-keyword">int</span> maxY = (<span class="hljs-keyword">int</span>)cameraCenter.Y + <span class="hljs-number">3</span> * <span class="hljs-number">30</span> + <span class="hljs-number">30</span>;
</code></pre>
<p>And bump p the visible area to be the entire screen, like so:</p>
<pre><code class="lang-cs"><span class="hljs-comment">// Find the visible corners of the screen in pixel position</span>
<span class="hljs-keyword">int</span> minX = (<span class="hljs-keyword">int</span>)cameraCenter.X - <span class="hljs-number">8</span> * <span class="hljs-number">30</span> - <span class="hljs-number">30</span>;
<span class="hljs-keyword">int</span> minY = (<span class="hljs-keyword">int</span>)cameraCenter.Y - <span class="hljs-number">6</span> * <span class="hljs-number">30</span> - <span class="hljs-number">30</span>;
<span class="hljs-keyword">int</span> maxX = (<span class="hljs-keyword">int</span>)cameraCenter.X + <span class="hljs-number">8</span> * <span class="hljs-number">30</span> + <span class="hljs-number">30</span>;
<span class="hljs-keyword">int</span> maxY = (<span class="hljs-keyword">int</span>)cameraCenter.Y + <span class="hljs-number">6</span> * <span class="hljs-number">30</span> + <span class="hljs-number">30</span>;
</code></pre>
<p><strong>Run the game</strong> now and you should be able to walk around flawlesly!</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Chapter20.html" class="navigation navigation-prev " aria-label="Previous page: Scrolling">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Chapter22.html" class="navigation navigation-next " aria-label="Next page: Depth">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Limit Scrolling","level":"1.16.1","depth":2,"next":{"title":"Depth","level":"1.17","depth":1,"path":"Chapter22.md","ref":"Chapter22.md","articles":[{"title":"Collision & Rendering","level":"1.17.1","depth":2,"path":"SpeerateCollisionAndRendering.md","ref":"SpeerateCollisionAndRendering.md","articles":[]},{"title":"Visual Tweaks","level":"1.17.2","depth":2,"path":"AddingAHouse.md","ref":"AddingAHouse.md","articles":[]},{"title":"Depth Buffer","level":"1.17.3","depth":2,"path":"DepthBuffer.md","ref":"DepthBuffer.md","articles":[]}]},"previous":{"title":"Scrolling","level":"1.16","depth":1,"path":"Chapter20.md","ref":"Chapter20.md","articles":[{"title":"Limit Scrolling","level":"1.16.1","depth":2,"path":"Chapter21.md","ref":"Chapter21.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"letter","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Chapter21.md","mtime":"2016-07-09T03:24:55.788Z","type":"markdown"},"gitbook":{"version":"3.1.1","time":"2016-10-03T18:07:37.300Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

